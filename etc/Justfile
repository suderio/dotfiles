#!/usr/bin/env just --justfile

set working-directory := 'tmp'
set tempdir := 'tmp'

# Lista de linguagens/pacotes desejados
OS_PACKAGES := "cmake mpv sxiv jq zip unzip git less curl wget shellcheck file gnupg openssh base-devel xdg-user-dirs xdg-utils php bash-completion"
RUST_PACKAGES := "bat eza git-delta bvaisvil/zenith.git du-dust tree-sitter-cli viu fd-find procs ast-grep starship zellij nu ripgrep "
PYTHON_PACKAGES := "isort pipenv nose nose2 pytest pylatexenc black pyflakes"
RUBY_PACKAGES := "neovim"
RUBY_PACKAGES_NOT_USED := "chef-utils concurrent kramdown kramdown-parser-gfm mixlib-cli mixlib-config mixlib-shellout rexml ruby-tomlrb"
GO_PACKAGES := "github.com/jesseduffield/lazygit@latest github.com/fatih/gomodifytags@latest github.com/cweill/gotests/gotests@latest golang.org/x/tools/gopls@latest mvdan.cc/sh/v3/cmd/shfmt@latest github.com/x-motemen/gore/cmd/gore@latest github.com/jessfraz/dockfmt@latest"
NPM_PACKAGES := "prettier bash-language-server node-gyp semver stylelint neovim  js-beautify markdownlint @mermaid-js/mermaid-cli"
PERL_PACKAGES := "Neovim::Ext Time::Piece"
MAKE_PACKAGES := "fzf neovim go lua luarocks texlive pandoc pynvim"
FONTS := "FiraCode DejaVuSansMono JetBrainsMono SourceCodePro Noto NerdFontsSymbolsOnly"
OTHER_PACKAGES := "setuptools lynis clamav emacs-wayland github-cli zathura zathura-djvu zathura-ps zathura-cb xdotool lua51 kitty ghostty imagemagick sbcl"
DUNO := "xclip aria2 aspell biber direnv git-lfs gnuplot pass sshfs chafa ueberzugpp zig zshdb shfmt tidy zls bashdb"
PACKAGES_UNINSTALL := "python-pynvim texlive pandoc markdownlint ruby-mixlib-shellout ruby-chef-utils ruby-concurrent ruby-kramdown-parser-gfm ruby-kramdown ruby-mixlib-cli ruby-mixlib-config ruby-rexml ruby-tomlrb lazygit npm bash-language-server node-gyp nodejs-nopt prettier semver stylelint nodejs bat eza ripgrep git-delta zenith dust tree-sitter-cli viu fd procs rustup ruby composer jdk-openjdk kotlin ktlint cpanminus julia gopls python-pipx python-isort python-nose python-nose2 python-pipenv python-pylatexenc python-pytest"

LOCAL_DIR := "$HOME/.local"
LUA_VERSION := "5.4.7"
LUAROCKS_VERSION := "3.11.1"
GO_VERSION := "1.24.2"
NERD_FONTS_URL := "https://github.com/ryanoasis/nerd-fonts/releases/latest/download/"
NVM_INSTALL_URL := "https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.2/install.sh"
KTLINT_INSTALL_URL := "https://github.com/pinterest/ktlint/releases/download/1.5.0/ktlint"
NEOVIM_INSTALL_URL := "https://github.com/neovim/neovim/releases/download/v0.11.0/nvim-linux-x86_64.tar.gz"
LUA_INSTALL_URL := "https://www.lua.org/ftp/lua-5.4.7.tar.gz"
LUAROCKS_INSTALL_URL := "https://luarocks.github.io/luarocks/releases/luarocks-3.11.1.tar.gz"
GO_INSTALL_URL := "https://go.dev/dl/go1.24.2.linux-amd64.tar.gz"

[unix]
[group('main')]
install-all:
  # Install pacman pkgs
  sudo pacman -S aspell ast-grep automake base base-devel bat chafa clamav clang cmake composer dust emacs-wayland eza fd fzf ghostty git git-delta github-cli gnuplot gopls graphviz hunspell hunspell-de hunspell-en_us hunspell-es_es hunspell-fr imagemagick jdk-openjdk julia just kitty kotlin ktlint lazygit less lua lua51 luarocks lynis maim man-db mermaid-cli neovim noto-fonts noto-fonts-emoji npm nushell openssh pacman-contrib pandoc-cli php procs python-black python-isort python-nose python-pipenv python-pyflakes python-pynvim python-pytest ruby rustup sbcl shellcheck shfmt sshfs starship stylelint sudo texlive-basic texlive-bibtexextra texlive-binextra texlive-context texlive-fontsextra texlive-fontsrecommended texlive-fontutils texlive-formatsextra texlive-games texlive-humanities texlive-latex texlive-latexextra texlive-latexrecommended texlive-luatex texlive-mathscience texlive-metapost texlive-music texlive-pictures texlive-plaingeneric texlive-pstricks texlive-publishers texlive-xetex tidy tree-sitter-cli tree-sitter-bash tree-sitter-javascript tree-sitter-python tree-sitter-rust ttf-firacode-nerd ttf-nerd-fonts-symbols ttf-nerd-fonts-symbols-mono ueberzugpp uv viu wget which xclip zathura zathura-cb zathura-djvu zathura-ps zellij zenith zig zls zshdb typescript-language-server vscode-json-languageserver lua-language-server bash-language-server bash-completion pyright ruby-lsp yaml-language-server cpanminus jujutsu jq yq editorconfig-core-c bob
  # Install paru
  git clone https://aur.archlinux.org/paru.git
  cd paru && makepkg -si
  # Install paru pkgs
  paru -S cljfmt-bin gomodifytags gore gotests js-beautify tree-sitter-zig tree-sitter-typescript tree-sitter-toml tree-sitter-sql tree-sitter-make tree-sitter-kotlin tree-sitter-julia tree-sitter-json tree-sitter-java tree-sitter-html tree-sitter-go tree-sitter-css  tree-sitter-commonlisp kotlin-language-server clojure-lsp-bin dockerfile-language-server phpactor jdtls hunspell-pt-br
  # tree-sitter-dockerfile-git tree-sitter-yaml tree-sitter-xml tree-sitter-php tree-sitter-latex tree-sitter-clojure-git tree-sitter-bibtex-git perl-perl-languageserver n√£o foram instalados (erro)
  # Install dockfmt
  /usr/lib/go/bin/go install github.com/jessfraz/dockfmt@latest
  # Install Julia Language Server
  /usr/sbin/julia -- "$HOME/.config/julia/emacs.jl"
  # Install latex-lsp
  cargo install --git https://github.com/latex-lsp/texlab --locked --tag v5.22.1
  # Install citation-langserver
  uv tool install citation-langserver
